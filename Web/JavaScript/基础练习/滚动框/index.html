<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .brow-box {
            width: 500px;
            height: 600px;
            display: flex;
            overflow: hidden;
            background-color: white;
        }

        .brow-content {
            width: 490px;
            height: 600px;
            box-sizing: border-box;
            padding: 0 20px;
            position: relative;
        }

        .content {
            width: 450px;
            position: absolute;
            top: 0;
        }

        .brow-side {
            width: 10px;
            height: 600px;
            background-color: #eee;
            position: relative;
        }

        .side {
            width: 10px;
            height: 50px;
            background: teal;
            border-radius: 5px;
            position: absolute;
            top: 0;
        }
    </style>
</head>

<body style="background-color: black;">

    <div class="brow-box">
        <div class="brow-content">
            <div class="content">Firefox火狐浏览器73.0版本发布，有哪些期待已久的新功能？ 在谷歌浏览器发布Chrome
                80版本几天后，2月11日，Mozilla也发布了Firefox火狐浏览器的最新版本73.0稳定版。
                目前，Firefox 73.0已面向Windows、Mac、Linux和Android用户正式推送更新。
                最新的Firefox版本包含两项新功能，可帮助用户更轻松，快速地查看和阅读网站内容。让我们一起来了解一下。 更新一：全局页面缩放
                谷歌的Chrome浏览器在外观设置中提供了页面缩放选项，能够让用户根据自己的使用习惯为所有网站设置所需要的缩放级别。
                但是，这项功能在Firefox上一直缺席——用户仅可以更改单个网站的缩放程度，并且仅个别网站支持此功能。 所以一直以来，火狐用户只能依靠第三方的浏览器插件来进行全局页面缩放的操作。
                不过，早在去年12月底，Firefox 73 Nightly版本中就加入了全局缩放UI，用户可以在测试版本中尝试此功能。 现在，Firefox 73.0稳定版如期更新了全局缩放的功能。
                此次更新后，用户可以缩放所有网站，也可以继续对单个网站进行调整。 这个功能主要是帮助用户更方便的阅读和查看网站内容。 要使用该功能，可以在地址栏输入about：preferences。
                然后向下滚动以找到页面上的“语言和外观”部分。 并且，该功能可以根据需要从30%调整到300％的缩放级别，也可以为所有站点设置默认缩放级别。
                此外，也可以选中“仅缩放文本”框以仅缩放文本，但将所有其他页面元素保持在默认级别。 更新二：高对比度模式 许多视力低下的用户依靠Windows的“高对比度模式”使网站更易于浏览。
                此前，为了提高文本的可读性，当用户启用“高对比度模式”时，Firefox会禁用背景图像。 现在，Firefox 73.0稳定版加入“可读性背板”选项，在文本和背景图之间放置了一块背景色。
                由此一来，“高对比度模式”下的网站在不删除背景图片的情况下更具可读性。 其他变化 1.Firefox 73.0稳定版修复了一些常规的安全问题。 2.在媒体播放控件方面，Firefox
                73.0稳定版现支持以不同速度播放音频。 3.如果修改了登录表单中的字段，Firefox将仅提示你保存登录名。 Android版Firefox 适用于Android的Firefox
                68.5.0也已发布，它包括“各种稳定性和安全性修补程序”。 Mozilla目前正在开发名为Firefox
                Preview的新Android浏览器，并计划在2020年将当前Android版Firefox的用户迁移到这个新版本中。 详情见《手机浏览器怎么装插件？全新火狐浏览器预览版现已支持直接安装》
                据官网介绍，Firefox的下一个稳定版本Firefox 74.0计划于2020年3月10日发布次更新后，用户可以缩放所有网站，也可以继续对单个网站进行调整。
                这个功能主要是帮助用户更方便的阅读和查看网站内容。 要使用该功能，可以在地址栏输入about：preferences。
                然后向下滚动以找到页面上的“语言和外观”部分。 并且，该功能可以根据需要从30%调整到300％的缩放级别，也可以为所有站点设置默认缩放级别。
                此外，也可以选中“仅缩放文本”框以仅缩放文本，但将所有其他页面元素保持在默认级别。 更新二：高对比度模式 许多视力低下的用户依靠Windows的“高对比度模式”使网站更易于浏览。
                此前，为了提高文本的可读性，当用户启用“高对比度模式”时，Firefox会禁用背景图像。 现在，Firefox 73.0稳定版加入“可读性背板”选项，在文本和背景图之间放置了一块背景色。
                由此一来，“高对比度模式”下的网站在不删除背景图片的情况下更具可读性。 其他变化 1.Firefox 73.0稳定版修复了一些常规的安全问题。 2.在媒体播放控件方面，Firefox
                73.0稳定版现支持以不同速度播放音频。 3.如果修改了登录表单中的字段，Firefox将仅提示你保存登录名。 Android版Firefox 适用于Android的Firefox
                68.5.0也已发布，它包括“各种稳定性和安全性修补程序”。 Mozilla目前正在开发名为Firefox
                Preview的新Android浏览器，并计划在2020年将当前Android版Firefox的用户迁移到这个新版本中。 详情见《手机浏览器怎么装插件？全新火狐浏览器预览版现已支持直接安装》
                据官网介绍，Firefox的下一个稳定版本Firefox 74.0计划于2020年3月10日发布。</div>
        </div>
        <div class="brow-side">
            <div class="side"></div>
        </div>
    </div>

    <script src="http://lib.nanzc.com/js/jq/jquery-3.4.1.min.js"></script>
    <script>

        // 计算比例
        var scale = $(".content")[0].offsetHeight / $(".brow-side")[0].offsetHeight;
        // 计算滚动条相对长度
        $(".side").css("height", $(".brow-side")[0].offsetHeight / scale + "px")

        // 鼠标滚动事件
        $(".brow-box")[0].onmousewheel = function (ev) {
            var ev = window.ev || ev;
            let top = parseInt($(".content").css("top"))
            mouseWheelDirection(ev) ? top += 20 : top -= 20
            moveBrow(top)
        }

        // 滚动条拖动
        $(".side").mousedown(function (ev) {
            var ev = window.ev || ev;
            var clientY = ev.clientY - $(".brow-box")[0].offsetTop;

            $(document).on("mousemove", function (ev) {
                var ev = window.ev || ev;
                var sideY = ev.clientY - $(".brow-box")[0].offsetTop;

                moveBrow(-(sideY - clientY) * scale)
            })

            $(document).mouseup(function () {
                $(this).off("mousemove")
            })
        })

        function moveBrow(toTop) {
            toTop > 0 ? toTop = 0 : null;

            toTop < -($(".content")[0].offsetHeight - $(".brow-content")[0].offsetHeight) ? toTop = - ($(".content")[0].offsetHeight - $(".brow-content")[0].offsetHeight) : null

            $(".content").css("top", toTop + "px")
            $(".side").css("top", -toTop / scale + "px")
        }


        /**
        * @author City
        * @method mouseWheelDirection - 判断滚轮滚动方向
        * @param {Event} ev - 事件对象
        * @returns {Boolean} - 向上：true，向下：false
        */

        function mouseWheelDirection(ev) {
            let key = ev.wheelDelta ? ev.wheelDelta : ev.detail;
            let top = Math.abs(key) == 120 ? 120 : -3;
            return key == top ? true : false;
        }

    </script>

</body>

</html>